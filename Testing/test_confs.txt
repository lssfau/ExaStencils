# configuration file for automatic tests

# a single line (which represents a single test config) must have one of the following two structures:
# ID  MainClass  KnowledgeInput
# ID  MainClass  KnowledgeInput  ResultFile  NumMPIRanks  NumCoresPerRank  [Constraint]

# neither of the fields must contain a white space, a tabular, or similar
# ID  is an arbitrary string to name the test
# MainClass  is the main class of the scala code generator that should be used (without .class ending)
# KnowledgeInput  is a text file containing all relevant configurations
# ResultFile  is a text file containing the expected output of the generated code
# both KnowledgeInput and ResultFile must be relative to the directory this file is located in
# NumMPIRanks  is the number of MPI ranks (processes)
# NumCoresPerRank  is the number of physical cores to be associated with each MPI rank
# Constraint  specifies features the nodes must have when executing the generated test code
#  for hardware definitions and available flags see hwinfo.txt

# if the last four fields are not set (as in the first structure above), the
# generated code is only compiled, but not executed

#################################################################################################
# BASIC COMMUNICATION TESTS                                                                     #
#################################################################################################

# 1 OMP thread
CommBasic_PureMPI     Main  CommBasic/PureMPI.knowledge     CommBasic/PureMPI.results     27  1
# 27 OMP threads
CommBasic_PureOMP     Main  CommBasic/PureOMP.knowledge     CommBasic/PureOMP.results     1   10
CommBasic_Hybrid      Main  CommBasic/Hybrid.knowledge      CommBasic/Hybrid.results      27  2
CommBasic_Summarize   Main  CommBasic/Summarize.knowledge   CommBasic/Summarize.results   27  2
CommBasic_Strategy26  Main  CommBasic/Strategy26.knowledge  CommBasic/Strategy26.results  27  2
# 9 OMP threads
CommBasic_2D          Main  CommBasic/2D.knowledge          CommBasic/2D.results          9   2

#################################################################################################
# LARGE DATA SIZE TESTS                                                                         #
#################################################################################################

# 10 OMP threads
Large_Hybrid  Main  Large/Hybrid.knowledge  Large/Hybrid.results  4  10  E5

#################################################################################################
# OPTIMIZATION TESTS                                                                            #
#################################################################################################

# no optimizations (0), all independenly (1-6) and in combination (7)
#  (run time for each is less than 5 seconds)
# sequential version
Seq_Test0  Main  Opts/seq_0.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test1  Main  Opts/seq_1.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test2  Main  Opts/seq_2.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test3  Main  Opts/seq_3.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test4  Main  Opts/seq_4.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test5  Main  Opts/seq_5.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test6  Main  Opts/seq_6.knowledge  Opts/seq.results  1   1  i7|E5
Seq_Test7  Main  Opts/seq_7.knowledge  Opts/seq.results  1   1  i7|E5
# parallel version (2*2*2 MPI ranks each with 3*3*3 OMP threads)
Par_Test0  Main  Opts/par_0.knowledge  Opts/par.results  8  10  E5
Par_Test1  Main  Opts/par_1.knowledge  Opts/par.results  8  10  E5
Par_Test2  Main  Opts/par_2.knowledge  Opts/par.results  8  10  E5
Par_Test3  Main  Opts/par_3.knowledge  Opts/par.results  8  10  E5
Par_Test4  Main  Opts/par_4.knowledge  Opts/par.results  8  10  E5
Par_Test5  Main  Opts/par_5.knowledge  Opts/par.results  8  10  E5
Par_Test6  Main  Opts/par_6.knowledge  Opts/par.results  8  10  E5
Par_Test7  Main  Opts/par_7.knowledge  Opts/par.results  8  10  E5

#################################################################################################
# SMOOTHER TESTS                                                                                #
#################################################################################################

# 27 OMP threads
Smoothers_Jac   Main    Smoothers/Jac.knowledge     Smoothers/Jac.results   27  2
Smoothers_GS    Main    Smoothers/GS.knowledge      Smoothers/GS.results    27  2
Smoothers_RBGS  Main    Smoothers/RBGS.knowledge    Smoothers/RBGS.results  27  2
